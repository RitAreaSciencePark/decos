{% extends "base.html" %}
{% load static wagtailcore_tags django_tables2 %}

{% block body_class %}template-form{% endblock %}

{% block content %}

<link rel="stylesheet" href="{% static 'css/forms/lage_form.css' %}">
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<h1><b>SAMPLE ENTRY FORM</b></h1>

{{ page.intro | richtext }}

{% if table %}
    <div class="section_div">
        <i>It is an internal entry or a service request?</i>
        <form id="sr_selection" method="get" action="">
            <input type="hidden" id="sr_id_hidden" name="sr_id" value="internal">
            <div class="sr_id_selection" id="dropMenu">
                <div class="dropdown">
                    <button class="btn btn-link dropdown-toggle" type="button" id="dropdownMenuButton"
                        data-bs-toggle='dropdown' aria-haspopup="true" aria-expanded="true">
                        Service Request
                    </button>
                    <div class="dropdown-menu dropdown-menu-left" aria-labelledby="dropdownMenuButton">
                        <input type="text" class="form-control" id="filterText" name="filter" aria-describedby="filterText"
                            placeholder="filter...">
                        <button type="submit" class="btn btn-primary">search</button>

                        <div class="dropdown-item" type="div" id="dropdown-div">
                            {% render_table table %}
                        </div>
                    </div>
                </div>
                <div class="sr_id_selection">
                    <button class="btn btn-link " type="submit" id="internalEntryButton" name="sr_id" value="internal"
                        aria-haspopup="true" aria-expanded="true">
                        Internal Request
                    </button>
                </div>
            </div>
        </form>
        <i>Service Request: </i> {{ sr_id }}

    </div>

{% endif %}
<form action="." method="POST" enctype="multipart/form-data" id="sampleform">
    {% csrf_token %}

    {% if "sr_" in sr_id %}
        <input type="hidden" name="sr_id_hidden" value="{{ sr_id }}" />
    {% else %}
        <input type="hidden" name="sr_id_hidden" value="internal" />
    {% endif %}
    <input type="hidden" name="sample_id_hidden" value="{{ sample_id }}">

    <div class="section_div">
        <h4><b> GENERAL SAMPLE INFORMATION </b></h4>
        <p>
            <i>Please insert a brief descriptive title of your experiment (max 64 characters):</i><br>
            {{ Bio_Open_Lab_UnisalentoSamples.sample_short_description }}
        </p>
        <p>
            <i>Please describe in a few words the experiment (max 500 characters)*</i>:<br>
            {{ Bio_Open_Lab_UnisalentoSamples.sample_description }}
        </p>
    </div>

    <div class="section_div">
        <h4><b> BIO OPEN LAB SAMPLE INFORMATION </b></h4>
        <p><i>Sample Name</i>:<br> {{ Bio_Open_Lab_UnisalentoSamples.sample_name }}</p>
        <p><i>Sample Producer</i>:<br> {{ Bio_Open_Lab_UnisalentoSamples.sample_producer }}</p>
        <p><i>Affiliation</i>:<br> {{ Bio_Open_Lab_UnisalentoSamples.affiliation }}</p>
        <p><i>Sample Purpose</i>:<br> {{ Bio_Open_Lab_UnisalentoSamples.sample_purpose }}</p>
        <p><i>Sample Type</i>:<br> {{ Bio_Open_Lab_UnisalentoSamples.sample_type }}</p>
        <p><i>Component Name</i>:<br> {{ Bio_Open_Lab_UnisalentoSamples.component_name }}</p>
        <p><i>Component Chemical Formula</i>:<br> {{ Bio_Open_Lab_UnisalentoSamples.component_chemical_formula }}</p>
        <p><i>Sheet</i>:<br> {{ Bio_Open_Lab_UnisalentoSamples.sheet }}</p>
        <p><i>Layer</i>:<br> {{ Bio_Open_Lab_UnisalentoSamples.layer }}</p>
        <p><i>Colloidal Solution</i>:<br> {{ Bio_Open_Lab_UnisalentoSamples.colloidal_solution }}</p>
        <p><i>Sample Expiration Date (YYYY-MM-DD)</i>:<br> {{ Bio_Open_Lab_UnisalentoSamples.sample_expiration_date }}</p>
    </div>

    <div class="section_div">
        <h4><b> FILES </b></h4>
        <p>
            <i>Attach additional file (zip or tar for multiple):</i><br>
            {{ Bio_Open_Lab_UnisalentoSamples.additional_filename }}
        </p>
    </div>

    <p><input type="submit" value="Insert data" class="btn btn-primary"></p>
</form>

<script>
    var QueryString = (new URL(location.href)).searchParams.get('filter');
    if (QueryString != '')
        $('#dropMenu .dropdown .dropdown-menu').show();
</script>


{% endblock %}